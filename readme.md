# moc.js
横着者のためのウェブページ目次生成プラグインスクリプトです．

## 概要
HTML の `<details>`＆`<summary>`タグを利用すると，
アコーディオン（開閉）式のページを容易に実現できます．
閉じておけば目次，開けば本文となります．

しかし，標準機能としては，
手動で `<summary>` 部分をクリックしないと
`<details>` セクションを開閉できません．
このため，次のような不便がありました．

- `<details>` 内のコンテンツが多い場合，
閉じるためにページのスクロールバックも必要．
- リンク経由で `<details>` に来た場合，
目次のどの項目を開くべきか不明．

本スクリプト `moc.js` は，これらの問題点を解決します．
まあ，<a href="demo/index.html"
target="_blank">デモ（外部サイト）</a>でも御覧ください．
<!--
まあ，<a href="https://www.kushiro-ct.ac.jp/yanagawa/moc-js/demo/index.html"
target="_blank">デモ（外部サイト）</a>でも御覧ください．
-->
「御品書だよ `<summary>` は．」

## ウェブサイトへの導入方法
- スクリプトファイル `moc.js` をサイト内の適切なディレクトリに移設．
- 同ファイル内の「サイト設定」部分をサイトの状況に応じて適切に変更．

## ウェブページの編集作業
ウェブページ編集時の必須の追加作業は次の２点だけです．
（元々，`<details>`＆`<summary>` を使っていた場合の話です．）

- スクリプトの読込 `<script src="moc.js"></script>`
- 全 `<details>` への `id="..."` の付与

その他，お好み次第で CSS を読み込ませたりしてください．

## サンプル HTML 断片
```html
<head>
...
<script src="moc.js"></script><!--必須-->
</head>
<body><!--もうonloadは要らない-->
...
<details id="A"><!--id必須-->
<summary>セクション A</summary>
<ul>
<li><a href="#B">セクション B へ移行．</a>
<li><a href="page2.html#X">別ページのセクション X へ移行．</a>
</ul>
（どちらも自動で開きますよ👍）
</details>
<details id="B">
<summary>セクション B</summary>
<a href="#A">Goto #A.</a>
</details>
```

## 更新履歴
- 2025.09.01 : 最低限の機能が整い，GitHubで公開，Qiitaで紹介．
（まだ，`<body onclick="Init()"`と`<a href="#..." onclick="Open()"`が必要だった．）
- 2025.09.02 :
    - 内部リンクの自動展開機能を追加．（`<a>`への`onclick="Open(#...)"`記述不要．JSで自動付与．）
    - ページ構成要素（ヘッダ，フッタ，等）のデフォルト設定をテンプレートリテラル化．（カスタマイズ性の向上？）
- 2025.09.03 :
    - サイト設定を別スクリプト化．（カスタマイズ性の向上？）
    - CSSファイル読込を自動化．（`<link>`記述不要，さらなる横着化．）
    - 多重`<details>`の再帰的自動展開機能を追加．（子セクションと同時に親セクションもオープン．）
- 2025.09.04 : 起動を自動化．（`<body>`に`onload="Init()"`記述不要．JS側で`window.onload=Init;`だけだった．） 
- 2025.09.06 : 多重`<details>`の再帰的自動折畳機能を追加．（親セクションと同時に子セクションもクローズ．）
- 2025.09.08 :
    - リセット機能を追加．（開閉の初期状態に戻す．）
    - デモページを更新．

